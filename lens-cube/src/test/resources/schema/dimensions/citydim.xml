<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<x_dimension name="citydim" xmlns="uri:lens:cube:0.1">
  <attributes>
    <dim_attribute _type="int" name="stateid" description="state id">
      <tags/>
    </dim_attribute>
    <dim_attribute _type="int" name="zipcode" description="zip code">
      <tags/>
    </dim_attribute>
    <dim_attribute _type="int" name="id" description="code">
      <tags/>
    </dim_attribute>
    <dim_attribute _type="string" name="statename" display_string="State name" description="state name">
      <tags/>
      <chain_ref_column chain_name="citystate" ref_col="name" dest_table="statedim"/>
    </dim_attribute>
    <dim_attribute _type="string" name="nocandidatecol" description="used in testing no candidate available">
      <tags/>
    </dim_attribute>
    <dim_attribute _type="string" name="name" description="city name">
      <tags/>
    </dim_attribute>
    <dim_attribute _type="string" name="ambigdim1" description="used in testColumnAmbiguity">
      <tags/>
    </dim_attribute>
    <dim_attribute _type="string" name="ambigdim2" description="used in testColumnAmbiguity">
      <tags/>
    </dim_attribute>
  </attributes>
  <expressions>
    <expression _type="string" name="citystate" display_string="City State" description="city's state">
      <tags/>
      <expr_spec expr="concat(citydim.name, &quot;:&quot;, citydim.statename)"/>
    </expression>
    <expression _type="string" name="cityaddress" display_string="City Address"
                description="city with state and city and zip">
      <tags/>
      <expr_spec
        expr="concat(citydim.name, &quot;:&quot;, citystate.name, &quot;:&quot;, citycountry.name, &quot;:&quot;, cityzip.code)"/>
      <expr_spec expr="concat(citydim.name, &quot;:&quot;, citystate.name)"/>
    </expression>
    <expression _type="int" name="aggrexpr" display_string="city count" description="count(name)">
      <tags/>
      <expr_spec expr="count(name)"/>
    </expression>
  </expressions>
  <join_chains>
    <join_chain dest_table="countrydim" name="citycountry" display_string="cube-zip" description="country thru city">
      <paths>
        <path>
          <edges>
            <edge>
              <from table="citydim" column="stateid" maps_to_many="false"/>
              <to table="statedim" column="id" maps_to_many="false"/>
            </edge>
            <edge>
              <from table="statedim" column="countryid" maps_to_many="false"/>
              <to table="countrydim" column="id" maps_to_many="false"/>
            </edge>
          </edges>
        </path>
        <path>
          <edges>
            <edge>
              <from table="citydim" column="statename" maps_to_many="false"/>
              <to table="statedim" column="name" maps_to_many="false"/>
            </edge>
            <edge>
              <from table="statedim" column="countryid" maps_to_many="false"/>
              <to table="countrydim" column="id" maps_to_many="false"/>
            </edge>
          </edges>
        </path>
      </paths>
    </join_chain>
    <join_chain dest_table="statedim" name="citystate" display_string="city-state" description="state thru city">
      <paths>
        <path>
          <edges>
            <edge>
              <from table="citydim" column="stateid" maps_to_many="false"/>
              <to table="statedim" column="id" maps_to_many="false"/>
            </edge>
          </edges>
        </path>
        <path>
          <edges>
            <edge>
              <from table="citydim" column="statename" maps_to_many="false"/>
              <to table="statedim" column="name" maps_to_many="false"/>
            </edge>
          </edges>
        </path>
      </paths>
    </join_chain>
    <join_chain dest_table="zipdim" name="cityzip" display_string="city-zip" description="Zipcode thru city">
      <paths>
        <path>
          <edges>
            <edge>
              <from table="citydim" column="zipcode" maps_to_many="false"/>
              <to table="zipdim" column="code" maps_to_many="false"/>
            </edge>
          </edges>
        </path>
      </paths>
    </join_chain>
  </join_chains>
  <properties>
    <property name="dimension.citydim.timed.dimension" value="dt"/>
    <property name="cube.table.citydim.weight" value="0.0"/>
  </properties>
</x_dimension>